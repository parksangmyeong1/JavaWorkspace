<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	 
<!-- 인터페이스의 full name을 namespace로 설정 -->
<mapper namespace="com.bitcamp.cobsp.post.dao.Dao">
	
	<!-- select의 결과를 매핑하는 설정 -->
	<resultMap id="postListResult" 
		type="com.bitcamp.cobsp.post.domain.Post">
		<id column="postIdx" property="postIdx"/>
		<result column="membIdx" property="membIdx"/>
		<result column="postWriter" property="postWriter"/>
		<result column="postSort" property="postSort"/>
		<result column="postContent" property="postContent"/>
		<result column="postRegDate" property="postRegDate"/>
		<result column="views" property="views"/>
		<result column="postLike" property="postLike"/>
		<result column="postDislike" property="postDislike"/>
		<result column="postRep" property="postRep"/>
	</resultMap>
	
	<!-- 게시글 등록 -->
	<insert id="insertPost"
		parameterType="com.bitcamp.cobsp.post.domain.Post"
		useGeneratedKeys="true"
		keyProperty="postIdx">
		insert into post (memIdx, postWriter, postTitle, postContent, postSort)
		value (#{memIdx}, #{postWriter}, #{postTitle}, #{postContent}, #{postSort})
	</insert>
	
	<!-- 게시글 리스트 출력 -->
	<select id="selectAll"
		resultMap="postListResult">
		select * from post order by postIdx
	</select>
	
	<!-- 게시글 수정 -->
	<update id="updatePost"
		parameterType="com.bitcamp.cobsp.post.domain.Post">
		update post set postTitle = #{postTitle}, postContent = #{postContent}, postSort = #{postSort} where postIdx = #{postIdx}
	</update>
	
	<!-- 해당 게시글 출력 -->
	<select id="selectPostByPostIdx"
		resultMap="postListResult">
		select * from post where postIdx = #{postIdx}
	</select>
	
</mapper>